<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="css/adminWorkshops.css">
    <script src="js/adminWorkshops.js" defer></script>

{{!-- workshop stuff --}}
    <link rel="stylesheet" href="css/workshopsUser.css">
    <script src="js/workshopMap.js"></script>
    <script>
        // Embed workshops data into a JavaScript variable
        const workshops = {{{json workshops}}};
    </script>
</head>
<h1 style="text-align:center;">Upcoming Workshops</h1>
<div class="container">
    {{#if workshops.length}}
        <div class="flex-container">
        {{#each workshops}}
            <table class="workshopTables">
                <tr class="workshopImage">
                    <td colspan="2">
                        <img src="/images/{{this.Workshop_Image}}" alt="{{this.Workshop_Image}}" class="workshopTableImage"/>
                    </td>
                </tr>
                <tr>
                    <th colspan="2" style="padding-left:10px;">{{this.Workshop_Name}}</th>
                    <td></td>
                </tr>
                <tr>
                    <th><button class="remove-button" data-workshop-name="{{this.Workshop_Name}}" data-workshop-id="{{this.Workshop_ID}}">Remove</button></th>
                    <td onclick="openWorkshopModal({{json this}})" class="readMoreButton"><a href="#">Read More &rarr;</a></td>
                </tr>
            </table>
        {{/each}}
        <button class="filter-icon" ></button>
        </div>
    {{else}}
        No Current Workshops
        <button class="filter-icon" ></button>
    {{/if}}
</div>

{{!-- Modal --}}

<div id="workshopModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modalWorkshopContent"></div>
    </div>
</div>

{{!-- add workshop popup --}}
<div class="modal" id="filterModal">
    <div class="modal-content">
        <span class="close-button">&times;</span>
        <div class="property-listing-page">
            <div class="listing-box">
                <div class="form-header">
                    <h1>Add Workshop</h1>
                </div>
                <form action="/adminWorkshops" method="post" class="addWorkshopForm">
                    <!-- First Section -->
                    <div class="input-group">
                        <label for="workshopName">Workshop Name</label>
                        <input type="text" id="workshopName" name="workshopName" placeholder="Enter Workshop Name">
                    </div>
                    <div class="input-group">
                        <label for="workshopStartDate">Workshop Start Date</label>
                        <input type="date" id="workshopStartDate" name="workshopStartDate">
                    </div>
                    <div class="input-group">
                        <label for="workshopEndDate">Workshop End Date</label>
                        <input type="date" id="workshopEndDate" name="workshopEndDate">
                    </div>
                    <div class="input-group">
                        <div style="margin-right:200px;margin-bottom:10px;">
                            Workshop Time
                        </div>
                        <div>
                            <input style="width:40%;margin-right:2.5rem" type="text" id="startTime" name="startTime" placeholder="Enter Start Time">
                            -
                            <input style="width:40%;margin-left:2.5rem;" type="text" id="endTime" name="endTime" placeholder="Enter End Time">
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="workshopAddress">Workshop Address</label>
                        <input type="text" id="workshopAddress" name="workshopAddress" placeholder="Enter Workshop Address">
                    </div>
                    <div class="input-group">
                        <label for="workshopLatitude">Workshop Latitude</label>
                        <input type="text" id="workshopLatitude" name="workshopLatitude" placeholder="Enter Workshop Latitude">
                    </div>
                    <div class="input-group">
                        <label for="workshopLongitude">Workshop Longitude</label>
                        <input type="text" id="workshopLongitude" name="workshopLongitude" placeholder="Enter Workshop Longitude">
                    </div>
                    <div class="input-group">
                        <label for="description">Description</label>
                        <textarea id="description" name="description" placeholder="Enter Workshop Description"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="workshopImage">Workshop Image</label>
                        <input type="file" id="workshopImage" name="workshopImage" multiple accept="image/*" onchange="previewImages()" required>
                    </div>
                    <div id="image-preview"></div>
                    <button class="formbutton" type="submit">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>

{{!-- remove button modal --}}
<div id="confirmationModal" class="modal">
    <div class="modal-content">
        <span class="close-confirmation">&times;</span>
        <p></p> 
        <a id="confirmRemoveButton"><button id="confirmRemoveButton" class="confirm-button">Yes, Remove</button></a>
        <button id="cancelRemoveButton" class="cancel-button">Cancel</button>
    </div>
</div>

<div class="modal" id="mapModal">
    <div class="map-modal-content">
        <span class="map-close-button">&times;</span>
        <div class="property-listing-page">
            <div class="listing-box">
                <div class="form-header">
                    <h1>Add Map Info</h1>
                </div>
                <form action="/mapLocation" method="post" class="addMapForm">
                    <!-- Event form fields -->
                    
                    <button class="formbutton" type="submit">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>
 

 <script>
    function updateCounter(id, value) {
        document.getElementById(id + '-counter').textContent = value;
    }

    function previewImages() {
        const preview = document.getElementById('image-preview');
        preview.innerHTML = '';
        const files = document.getElementById('property-pictures').files;
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const reader = new FileReader();
            reader.onload = function(e) {
                const imgContainer = document.createElement('div');
                imgContainer.className = 'image-container';

                const img = document.createElement('img');
                img.src = e.target.result;
                img.style.maxWidth = '150px';
                img.style.margin = '10px';

                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Remove';
                deleteBtn.className = 'delete-btn';
                deleteBtn.addEventListener('click', function() {
                    imgContainer.remove(); // Remove the image container
                });

                imgContainer.appendChild(img);
                imgContainer.appendChild(deleteBtn);
                preview.appendChild(imgContainer);
            };
            reader.readAsDataURL(file);
        }
    }
</script>
